(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/next/next"],{4926:function(t,e,n){"use strict";n.r(e);var o=n("9072"),s=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);e["default"]=s.a},5781:function(t,e,n){"use strict";n.r(e);var o=n("8fd4"),s=n("f6ff");for(var a in s)"default"!==a&&function(t){n.d(e,t,function(){return s[t]})}(a);n("74a9");var u=n("2877"),c=Object(u["a"])(s["default"],o["a"],o["b"],!1,null,"40d17843",null);e["default"]=c.exports},"5b34":function(t,e,n){"use strict";n("e301");var o=a(n("b0ce")),s=a(n("5781"));function a(t){return t&&t.__esModule?t:{default:t}}Page((0,o.default)(s.default))},"74a9":function(t,e,n){"use strict";var o=n("c308"),s=n.n(o);s.a},"8fd4":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:"chat_page"},[n("view",{staticClass:"header"},[n("p",{attrs:{eventid:"bf4ccf1e-0"},on:{click:function(e){t.go_back()}}},[t._v("返回")]),n("p",[t._v("与xxx的聊天")]),n("p")],1),n("view",{staticClass:"chat_history"},t._l(t.data_list,function(e,o){return n("view",[e.text?n("p",[t._v(t._s(e.name)+"： "+t._s(e.text))]):t._e(),e.text?t._e():n("p",[t._v(t._s(e.name)+"加入聊天室")])],1)})),n("view",{staticClass:"input_box"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.obj.inp_msg,expression:"obj.inp_msg"}],attrs:{id:"inp_box",type:"text",eventid:"bf4ccf1e-1"},domProps:{value:t.obj.inp_msg},on:{input:function(e){e.target.composing||(t.obj.inp_msg=e.target.value)}}}),n("p",{staticClass:"send_msg",attrs:{eventid:"bf4ccf1e-2"},on:{click:function(e){t.send()}}},[t._v("发送")])],1),t.fog_status?n("div",{staticClass:"set_name"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.obj.user_name,expression:"obj.user_name"}],attrs:{placeholder:"请输入您在此聊天室的昵称",Focus:"",type:"text",eventid:"bf4ccf1e-3"},domProps:{value:t.obj.user_name},on:{input:function(e){e.target.composing||(t.obj.user_name=e.target.value)}}}),n("p",{attrs:{eventid:"bf4ccf1e-4"},on:{click:t.set_name_ok}},[t._v("确定")])],1):t._e(),n("Fog",{attrs:{fog_status:t.fog_status,mpcomid:"bf4ccf1e-0"}})],1)},s=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s})},9072:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={data:function(){return{}},props:["fog_status"]};e.default=o},c308:function(t,e,n){},d2a6:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=s(n("fe20"));function s(t){return t&&t.__esModule?t:{default:t}}var a={data:function(){return{data_list:[],fog_status:!0,obj:{user_name:"",inp_msg:""},ws:null}},components:{Fog:o.default},watch:{obj:function(){console.log(11e3)}},mounted:function(){var e=this,n=this,o=document.getElementsByClassName("send_msg")[0],s=document.getElementById("inp_box");o.onmousedown=function(t){return t&&t.preventDefault?t.preventDefault():window.event.returnValue=!1,!1};var a=new WebSocket("ws://192.168.118.140:8001");this.ws=a,t.getStorage({key:"obj",success:function(t){t.data&&(e.obj=t.data,e.fog_status=!1,e.ws.onopen=function(){console.log("连接服务器成功"),e.ws.send(JSON.stringify(e.obj))})}}),o.onclick=function(){s.focus(),n.obj.inp_msg&&(n.ws.send(JSON.stringify(n.obj)),n.obj.inp_msg="")},this.ws.onclose=function(t){console.log("服务器关闭")},this.ws.onerror=function(){console.log("连接出错")},this.ws.onmessage=function(t){console.log(t.data),"success"!==t.data&&(n.data_list.push(JSON.parse(t.data)),console.log(n.data_list))}},beforeDestroy:function(){t.removeStorage({key:"obj",success:function(t){console.log("success")}})},methods:{go_back:function(){t.navigateBack({delta:1})},chat_all:function(){},send:function(){},set_name_ok:function(){var e=this;if(this.obj.user_name){var n=new WebSocket("ws://192.168.118.140:8001");n.onopen=function(){console.log("连接服务器成功"),n.send(JSON.stringify(e.obj))},t.setStorage({key:"obj",data:this.obj,success:function(){e.fog_status=!1}})}}}};e.default=a}).call(this,n("6e42")["default"])},e1b1:function(t,e,n){},e2c9:function(t,e,n){"use strict";var o=n("e1b1"),s=n.n(o);s.a},e6b5:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.fog_status?n("view",{staticClass:"fog"}):t._e()},s=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s})},f6ff:function(t,e,n){"use strict";n.r(e);var o=n("d2a6"),s=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);e["default"]=s.a},fe20:function(t,e,n){"use strict";n.r(e);var o=n("e6b5"),s=n("4926");for(var a in s)"default"!==a&&function(t){n.d(e,t,function(){return s[t]})}(a);n("e2c9");var u=n("2877"),c=Object(u["a"])(s["default"],o["a"],o["b"],!1,null,"12531f90",null);e["default"]=c.exports}},[["5b34","common/runtime","common/vendor"]]]);